---

- hosts: "{{ hname }}"
  serial: 1
  gather_facts: yes

- name: sap stop test
  shell: df -g|grep -i sapmnt|awk '{print $NF}'|cut -d/ -f3 > /tmp/sidfile.txt

- name: cat /tmp/sidfile.txt
  shell: cat /tmp/sidfile.txt
  register: sidfile

- debug:
    msg: "{{ sidfile }}"

- name: checking sid in loop
  shell: kill -9 {{ item }}
  with_items: "{{ pidfile['stdout_lines'] }}"

- name: Setting facts
  set_fact:
    sidadm: "{{ item | lower }}adm"
  become: yes
  with_items: "{{ sidfile['stdout_lines'] }}"

- debug:
    msg: "{{ sidadm }}"
  