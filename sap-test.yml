---
- name: Get the SAP CRYPTO version from indiduval server
  hosts: target_update_servers_c2
  become: yes
  become_method: sudo
  vars: 
    ansible_python_interpreter: "/usr/bin/python"
  roles:
  - role: sap-commoncrypto-versioncollect-aix
    ignore_errors: yes
  tasks:
    - name: Add sap CRYPTO version to report File.
      lineinfile:
        dest: "{{ report_file }}"
        line: "{{ entity_name }},{{ item.get_hname }},{{ item.get_ssid1 }},{{ item.get_crypt }}"
      throttle: 1
      loop:
        - get_hname: "{{ get_hname_output.results[0].stdout }}"
          get_ssid1: "{{ get_SID.results[0].stdout }}"
          get_crypt: "{{ get_crypto_level.results[0].stdout }}"
        - get_hname: "{{ get_hname_output.results[1].stdout }}"
          get_ssid1: "{{ get_SID.results[1].stdout }}"
          get_crypt: "{{ get_crypto_level.results[1].stdout }}"
        - get_hname: "{{ get_hname_output.results[2].stdout }}"
          get_ssid1: "{{ get_SID.results[2].stdout }}"
          get_crypt: "{{ get_crypto_level.results[2].stdout }}"
        - get_hname: "{{ get_hname_output.results[3].stdout }}"
          get_ssid1: "{{ get_SID.results[3].stdout }}"
          get_crypt: "{{ get_crypto_level.results[3].stdout }}"
        - get_hname: "{{ get_hname_output.results[4].stdout }}"
          get_ssid1: "{{ get_SID.results[4].stdout }}"
          get_crypt: "{{ get_crypto_level.results[4].stdout }}"
      delegate_to: ampsv010bld0d
