---
- name:  Upgrade loginventory version
  shell: |
    echo -e '\x1dclose\x0d' | telnet 10.124.72.254 443
    if [ $? -eq 0 ]
    then
    echo "telnet port connection test is working fine" > /tmp/loginventlog.txt
    rpm -qa | grep -i login >> /tmp/loginventlog.txt
    rpm -Uvh /tmp/SG-loginfox-cf-aix-9.1.4.14828-4.aix7.2.noarch.rpm
    sleep 30
    rpm -qa | grep -i login >> /tmp/loginventlog.txt
    /opt/loginfox-cf/loginfox-cf.sh
    else
    echo "telnet port check not working" > /tmp/loginventlog.txt
    fi
  register: prodata
  ignore_errors: yes

- name: Print the result
  debug:
    var: prodata.stdout_lines

- name: Demo set_facts final output
  set_fact:
    prodata: "{{ prodata['stdout'] }}"
  
- debug:
    msg: "{{ prodata }}"
