---
- name: Copy the script
  copy:
    src: files/sap-version-check.sh
    dest: "{{ sap_version_check_script }}"
    owner: "{{ sid_adm_usr }}"
    mode: '0700'

- name: Get the SAP version 
  shell: "su - {{ sid_adm_usr }} -c {{ sap_version_check_script }}"
  register: get_version_of_sap_output
  changed_when: False
  args:
    warn: false
  when: sid_adm_usr is defined
 
- debug:
    msg: "{{ get_version_of_sap_output.stdout_lines }}"
  when: sid_adm_usr is defined

- name: remove the script
  file:
    path: "{{ sap_version_check_script }}"
    state: absent