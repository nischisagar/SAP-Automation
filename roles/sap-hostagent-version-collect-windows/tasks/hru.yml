---
- name: Collect Hostname and Hostagent version detail
  win_shell: |
    hostname > C:\temp\check1234.txt
    ./saphostexec.exe -version| select-string -pattern variant|%{ (-split $_)[3] } >> C:\temp\check1234.txt
    ./saphostexec.exe -version| select-string -pattern "patch number"|%{ (-split $_)[2] } >>C:\temp\check1234.txt
    $var1[1]| %{ (-split $_)[3] }
  args:
    chdir: 'C:\Program Files\SAP\hostctrl\exe'
  become: yes
  become_method: runas
  become_user: system
  register: hostversion_detail

- debug:
    msg: "{{ hostversion_detail.stdout_lines }}"
