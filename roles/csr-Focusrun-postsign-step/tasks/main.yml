---
- name: Getting current host info
  shell: hostname
  register: hname

- debug:
    msg: "{{ hname }}"

- name: Setting facts - hname
  set_fact:
    hname: "{{ hname['stdout'] }}"

- debug:
    msg: "{{ hname }}"

- name: Check SAPSSLS got created or not
  stat:
    path: "{{ install_path }}/SAPSSLS.pse"
  register: file_data

- name: Copy files hostctrl sec path and update SAPSSLS
  shell: |
    cp -rpf {{ exe_path }}/sec {{ exe_path }}/sec_`date +%d%m`
    rm -f {{ exe_path }}/sec/*
    cp -pf {{ install_path }}/* {{ exe_path }}/sec/
    {{ exe_path }}/sapgenpse maintain_pk -a {{ install_path }}/Saint_Gobain_Root_CA.cer -p {{ exe_path }}/sec/SAPSSLS.pse
    {{ exe_path }}/sapgenpse maintain_pk -a {{ install_path }}/SG-RootCA-G2.cer -p {{ exe_path }}/sec/SAPSSLS.pse
  when: file_data.stat.exists
  regiester: ssls_out

- debug:
    msg: "{{ ssls_out }}"




